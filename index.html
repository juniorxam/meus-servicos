<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ControlServ - Gestão de Serviços</title>

    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div id="app">
        <h1>ControlServ - Gestão de Serviços</h1>
        
        <div class="tabs">
            <button class="tab-button active" onclick="app.abrirTab('dashboard')">Dashboard</button>
            <button class="tab-button" onclick="app.abrirTab('cadastro')">Novo Serviço</button>
            <button class="tab-button" onclick="app.abrirTab('servicos')">Serviços</button>
            <button class="tab-button" onclick="app.abrirTab('relatorios')">Relatórios</button>
            <button class="tab-button" onclick="app.abrirTab('config')">Configurações</button>
        </div>

        <div id="dashboard" class="tab-content active">
            <h2>Dashboard</h2>
            <div id="dashboard-cards" class="card-grid">
                </div>
        </div>

        <div id="cadastro" class="tab-content">
            <h2>Cadastrar Novo Serviço</h2>
            <form id="formCadastro">
                <label for="descricao">Descrição do Serviço:</label>
                <input type="text" id="descricao" name="descricao" required>
                
                <label for="cliente">Cliente:</label>
                <input type="text" id="cliente" name="cliente" required>
                
                <label for="valorTotal">Valor Total (R$):</label>
                <input type="number" id="valorTotal" name="valorTotal" min="0" step="0.01" value="0.00" required>
                
                <label for="dataInicio">Data de Início:</label>
                <input type="date" id="dataInicio" name="dataInicio" required>
                
                <label for="duracaoDias">Duração (dias):</label>
                <input type="number" id="duracaoDias" name="duracaoDias" min="1" value="1" required oninput="app.calcularDataFim()">
                
                <label for="dataFimPrevista">Data Fim Prevista:</label>
                <input type="date" id="dataFimPrevista" name="dataFimPrevista" readonly>

                <button type="submit">Salvar Serviço</button>
            </form>
        </div>

        <div id="servicos" class="tab-content">
            <h2>Lista de Serviços</h2>
            <input type="text" id="filtroServicos" placeholder="Buscar por descrição ou cliente..." onkeyup="app.carregarServicos()">
            <table id="tabelaServicos">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Descrição</th>
                        <th>Cliente</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </div>

        <div id="relatorios" class="tab-content">
            <h2>Geração de Relatórios</h2>
            <div class="report-controls">
                <button onclick="reports.gerarPDF()">Gerar PDF</button>
                <button onclick="reports.gerarCSV()">Gerar CSV</button>
            </div>
        </div>

        <div id="config" class="tab-content">
            <h2>Configurações de Dados</h2>
            
            <h3>Exportar e Importar (Backup Manual)</h3>
            <p>Use esta função para salvar seus dados localmente ou transferir para outro dispositivo.</p>
            <div class="action-group">
                <button onclick="app.exportarDadosJSON()">1. Exportar Dados (JSON)</button>
                <label for="importFile" class="file-label">
                    2. Importar Dados (JSON):
                    <input type="file" id="importFile" accept=".json" onchange="app.importarDadosJSON(this.files)">
                </label>
            </div>
            
            <hr>

            <h3>Dados de Teste e Limpeza</h3>
            <button onclick="app.criarDadosExemplo()">Criar Dados de Exemplo</button>
            <button onclick="app.limparTodosDados()">Limpar Todos os Dados</button>
        </div>
    </div>
    
    <div id="notification-container"></div>
    <div id="loading-overlay" class="hidden">
        <div class="loader"></div>
        <p id="loading-message">Carregando...</p>
    </div>

    <script src="js/constants.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
